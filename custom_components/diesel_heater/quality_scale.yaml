# Home Assistant Quality Scale
# https://developers.home-assistant.io/docs/core/integration-quality-scale/
#
# This file tracks compliance with HA Core integration requirements.
# Status: done | todo | exempt
#
# Bronze tier is REQUIRED for HA Core submission.
# Silver tier is recommended for better user experience.

rules:
  # ===== BRONZE (Required) =====

  # Actions are registered in async_setup_entry
  action-setup: done

  # Polling interval is appropriate (not too frequent)
  appropriate-polling: done

  # Brand assets submitted to home-assistant/brands
  brands: todo

  # Code is organized in common modules (coordinator, const, etc.)
  common-modules: done

  # Config flow has adequate test coverage
  config-flow-test-coverage: done

  # Config flow supports discovery and manual setup
  config-flow: done

  # Dependencies are available on PyPI (not bundled)
  dependency-transparency: todo  # diesel-heater-ble pending PyPI publication

  # Documentation exists for actions/services
  docs-actions: todo

  # High-level description in documentation
  docs-high-level-description: todo

  # Installation instructions in documentation
  docs-installation-instructions: todo

  # Removal instructions in documentation
  docs-removal-instructions: todo

  # Entities subscribe to events in async_added_to_hass
  entity-event-setup: done

  # All entities have unique_id
  entity-unique-id: done

  # Entities use has_entity_name = True
  has-entity-name: done

  # Uses entry.runtime_data pattern
  runtime-data: done

  # Tests connection before completing config flow
  test-before-configure: done

  # Raises ConfigEntryNotReady if setup fails
  test-before-setup: done

  # Prevents duplicate config entries
  unique-config-entry: done

  # ===== SILVER (Recommended) =====

  # Services raise proper exceptions with translations
  action-exceptions: done

  # Config entry can be unloaded cleanly
  config-entry-unloading: done

  # Documentation for configuration parameters
  docs-configuration-parameters: todo

  # Documentation for installation parameters
  docs-installation-parameters: todo

  # Entities properly report unavailable state
  entity-unavailable: done

  # Integration owner defined in codeowners
  integration-owner: done

  # Logs when entity becomes unavailable
  log-when-unavailable: done

  # PARALLEL_UPDATES defined for all platforms
  parallel-updates: done

  # Reauthentication flow (exempt: PIN-only, no auth)
  reauthentication-flow:
    status: exempt
    comment: Integration uses optional PIN, not authentication

  # Test coverage >= 95%
  test-coverage: done  # Currently 98%
